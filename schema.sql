CREATE TABLE pictures (
id INTEGER PRIMARY KEY AUTOINCREMENT,
sha1 TEXT NOT NULL,
fileType TEXT(4) NOT NULL,
origFileName TEXT NOT NULL,
dateTaken TEXT NOT NULL,
dateAdded INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,
ts INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP
);
CREATE UNIQUE INDEX 'pictures_sha1_UNIQUE' ON 'pictures' ('sha1' ASC);


CREATE TABLE sets (
id INTEGER PRIMARY KEY AUTOINCREMENT,
name TEXT NOT NULL,
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);
CREATE UNIQUE INDEX 'sets_name_UNIQUE' ON 'sets' ('name' ASC);

CREATE TABLE galleries (
id INTEGER PRIMARY KEY AUTOINCREMENT,
name TEXT NOT NULL,
title TEXT,
description TEXT,
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);
CREATE UNIQUE INDEX 'galleries_name_UNIQUE' ON 'galleries' ('name' ASC);

CREATE TABLE tags (
id INTEGER PRIMARY KEY AUTOINCREMENT,
name TEXT,
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);
CREATE UNIQUE INDEX 'tags_name_UNIQUE' ON 'tags' ('name' ASC);

CREATE TABLE comments (
id INTEGER PRIMARY KEY AUTOINCREMENT,
comment TEXT,
id_picture INTEGER REFERENCES pictures (id),
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE sets_galleries (
id INTEGER PRIMARY KEY AUTOINCREMENT,
id_gallery INTEGER REFERENCES galleries (id),
id_set INTEGER REFERENCES sets (id),
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE tags_pictures (
id INTEGER PRIMARY KEY AUTOINCREMENT,
id_tag INTEGER REFERENCES tags (id),
id_picture INTEGER REFERENCES pictures (id),
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE UNIQUE INDEX 'tags_pictures_UNIQUE' ON 'tags_pictures' ('id_tag','id_picture' ASC);

CREATE TABLE sets_pictures (
id INTEGER PRIMARY KEY AUTOINCREMENT,
id_picture INTEGER REFERENCES pictures (id),
id_set INTEGER REFERENCES sets (id),
ts NOT NULL DEFAULT CURRENT_TIMESTAMP
);


